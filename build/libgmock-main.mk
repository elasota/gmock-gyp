LIBGMOCK_MAIN_CPPFLAGS := $(LIBGMOCK_CPPFLAGS)

LIBGMOCK_MAIN_A := $(OUT)/libgmock-main.a
LIBGMOCK_MAIN_SRCS := \
    $(GMOCK)/googletest-1.10.0/googlemock/src/gmock_main.cc
LIBGMOCK_MAIN_OBJS := $(LIBGMOCK_MAIN_SRCS:%=$(OUT)/%.o)

$(LIBGMOCK_MAIN_A): $(LIBGMOCK_MAIN_OBJS) $(LIBGMOCK_OBJS) $(LIBGTEST_OBJS)
	$(AR) rcs $@ $+

PRIVATE_LIBGMOCK_MAIN_CPPFLAGS := $(PRIVATE_LIBGMOCK_CPPFLAGS)

$(LIBGMOCK_MAIN_OBJS): $(OUT)/%.cc.o: %.cc
	@$(MKDIR_P) $(dir $@)
	$(CXX) $(CPPFLAGS) $(CXXFLAGS) $(PRIVATE_LIBGMOCK_MAIN_CPPFLAGS) -c $< -o $@

-include $(LIBGMOCK_MAIN_OBJS:.o=.d)
